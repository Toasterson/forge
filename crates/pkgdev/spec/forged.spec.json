{"openapi":"3.0.3","info":{"title":"Package forge API","description":"Manage your interactions with a distribution community","contact":{"name":"Till Wegm√ºller","email":"toasterson@gmail.com"},"license":{"name":"MPL-2.0","url":"https://www.mozilla.org/en-US/MPL/2.0/"},"version":"v1"},"paths":{"/api/v1/actors/connect":{"post":{"tags":["api::v1::actor"],"operationId":"actor_connect","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActorConnectRequest"}}},"required":true},"responses":{"200":{"description":"Actor successfully connected to the Oauth Provider","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActorConnectResponse"}}}},"404":{"description":"Actor not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/auth/login_info":{"get":{"tags":["api::v1::auth"],"operationId":"login_info","responses":{"200":{"description":"Successfully got the Publishers","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthConfig"}}}},"404":{"description":"No such domain on this forge","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/components/":{"post":{"tags":["api::v1::component"],"operationId":"create_component","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComponentInput"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved component info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Component"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Component not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/components/get":{"post":{"tags":["api::v1::component"],"operationId":"get_component","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetComponentRequest"}}},"required":true},"responses":{"200":{"description":"Successfully got the Component","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Component"}}}},"404":{"description":"Component not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/components/import":{"post":{"tags":["api::v1::component"],"operationId":"import_component","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComponentInput"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved component info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Component"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Component not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/components/list":{"post":{"tags":["api::v1::component"],"operationId":"list_components","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListComponentRequest"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved component info","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Component"}}}}},"404":{"description":"Component not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/components/upload/{kind}":{"post":{"tags":["api::v1::component"],"operationId":"upload_to_component","parameters":[{"name":"kind","in":"path","description":"Kind of file to upload","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Multipart file or url","content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Upload"}}},"required":true},"responses":{"200":{"description":"Upload successful"},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Component not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/gates/":{"post":{"tags":["api::v1::gate"],"operationId":"create_gate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGateInput"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved gate info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Gate"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Gate not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/gates/get":{"post":{"tags":["api::v1::gate"],"operationId":"get_gate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GateSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved gate info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Gate"}}}},"404":{"description":"Gate not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/gates/list":{"post":{"tags":["api::v1::gate"],"operationId":"list_gates","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GateListRequest"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved gate info","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Gate"}}}}},"404":{"description":"Gate not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/gates/{id}":{"put":{"tags":["api::v1::gate"],"operationId":"update_gate","parameters":[{"name":"id","in":"path","description":"Database id of the Gate to update","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateGateInput"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved gate info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Gate"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Gate not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/publishers/":{"get":{"tags":["api::v1::publisher"],"operationId":"list_publishers","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginationInput"}],"nullable":true}}},"required":false},"responses":{"200":{"description":"Successfully got the Publishers","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Publisher"}}}}}}},"post":{"tags":["api::v1::publisher"],"operationId":"create_publisher","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePublisherInput"}}},"required":true},"responses":{"200":{"description":"Successfully got the Publisher","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Publisher"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Publisher not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}}},"components":{"schemas":{"ActorConnectRequest":{"oneOf":[{"type":"object","required":["GitHub"],"properties":{"GitHub":{"type":"object","required":["handle","token","ssh_keys"],"properties":{"display_name":{"type":"string","nullable":true},"handle":{"type":"string"},"ssh_keys":{"type":"array","items":{"type":"string"}},"token":{"type":"string"}}}}},{"type":"object","required":["GitLab"],"properties":{"GitLab":{"type":"object","required":["handle","token","ssh_keys"],"properties":{"display_name":{"type":"string","nullable":true},"handle":{"type":"string"},"ssh_keys":{"type":"array","items":{"type":"string"}},"token":{"type":"string"}}}}}]},"ActorConnectResponse":{"type":"object","required":["access_token","refresh_token","ssh_keys","handle"],"properties":{"access_token":{"type":"string"},"handle":{"type":"string"},"refresh_token":{"type":"string"},"ssh_keys":{"type":"array","items":{"$ref":"#/components/schemas/ActorSSHKeyFingerprint"}}}},"ActorSSHKeyFingerprint":{"oneOf":[{"type":"object","required":["Ed25519"],"properties":{"Ed25519":{"type":"string"}}},{"type":"object","required":["Rsa"],"properties":{"Rsa":{"type":"string"}}},{"type":"object","required":["ECDSA"],"properties":{"ECDSA":{"type":"string"}}}]},"ApiError":{"oneOf":[{"type":"object","required":["BadRequest"],"properties":{"BadRequest":{"type":"string"}}},{"type":"string","enum":["Unauthorized"]},{"type":"object","required":["NotFound"],"properties":{"NotFound":{"type":"string"}}},{"type":"object","required":["ServerError"],"properties":{"ServerError":{"type":"string"}}}]},"AuthConfig":{"type":"object","properties":{"github":{"allOf":[{"$ref":"#/components/schemas/forge.OpenIdConfig"}],"nullable":true},"gitlab":{"allOf":[{"$ref":"#/components/schemas/forge.OpenIdConfig"}],"nullable":true}}},"Component":{"type":"object","required":["name","version","revision","project_url","gate_id","recipe","packages"],"properties":{"anitya_id":{"type":"string","nullable":true},"gate_id":{"type":"string"},"name":{"type":"string"},"packages":{"$ref":"#/components/schemas/PackageMeta"},"project_url":{"type":"string"},"recipe":{"$ref":"#/components/schemas/Recipe"},"repology_id":{"type":"string","nullable":true},"revision":{"type":"string"},"version":{"type":"string"}}},"ComponentIdentifier":{"type":"object","required":["name","version","revision","gate_id"],"properties":{"gate_id":{"type":"string"},"name":{"type":"string"},"revision":{"type":"string"},"version":{"type":"string"}}},"ComponentInput":{"type":"object","required":["recipe","packages","gate"],"properties":{"anitya_id":{"type":"string","nullable":true},"gate":{"type":"string"},"packages":{"$ref":"#/components/schemas/PackageMeta"},"recipe":{"$ref":"#/components/schemas/Recipe"},"repology_id":{"type":"string","nullable":true}}},"CreateGateInput":{"type":"object","required":["name","publisher","version","branch"],"properties":{"branch":{"type":"string"},"name":{"type":"string"},"publisher":{"type":"string"},"transforms":{"type":"array","items":{"type":"string"},"nullable":true},"version":{"type":"string"}}},"CreatePublisherInput":{"type":"object","required":["name"],"properties":{"name":{"type":"string"}}},"Gate":{"type":"object","required":["id","name","version","branch","publisher","transforms"],"properties":{"branch":{"type":"string"},"id":{"type":"string"},"name":{"type":"string"},"publisher":{"type":"string"},"transforms":{"type":"array","items":{"type":"string"}},"version":{"type":"string"}}},"GateListRequest":{"type":"object","properties":{"publisher":{"type":"string","nullable":true}}},"GateSearchRequest":{"type":"object","required":["publisher","name"],"properties":{"name":{"type":"string"},"publisher":{"type":"string"}}},"GetComponentRequest":{"type":"object","required":["name","version","revision","gate_id"],"properties":{"gate_id":{"type":"string"},"name":{"type":"string"},"revision":{"type":"string"},"version":{"type":"string"}}},"ListComponentRequest":{"type":"object","required":["name"],"properties":{"gate_id":{"type":"string","nullable":true},"name":{"type":"string"},"revision":{"type":"string","nullable":true},"version":{"type":"string","nullable":true}}},"OpenIdConfig":{"type":"object","required":["client_id"],"properties":{"client_id":{"type":"string"}}},"PaginationInput":{"type":"object","required":["limit"],"properties":{"cursor":{"type":"string","nullable":true},"limit":{"type":"integer","format":"int64"}}},"Publisher":{"type":"object","required":["id","name"],"properties":{"id":{"type":"string"},"name":{"type":"string"}}},"UpdateGateInput":{"type":"object","properties":{"branch":{"type":"string","nullable":true},"name":{"type":"string","nullable":true},"transforms":{"type":"array","items":{"type":"string"},"nullable":true},"version":{"type":"string","nullable":true}}},"Upload":{"type":"object","required":["identifier","file"],"properties":{"file":{"type":"string","format":"binary"},"identifier":{"$ref":"#/components/schemas/ComponentIdentifier"},"url":{"allOf":[{"$ref":"#/components/schemas/Url"}],"nullable":true}}}},"securitySchemes":{"api_key":{"type":"apiKey","in":"header","name":"apikey"}}},"tags":[{"name":"forge","description":"Forge your packages"}]}