{"openapi":"3.0.3","info":{"title":"Package forge API","description":"Manage your interactions with a distribution community","contact":{"name":"Till Wegm√ºller","email":"toasterson@gmail.com"},"license":{"name":"MPL-2.0","url":"https://www.mozilla.org/en-US/MPL/2.0/"},"version":"v1"},"paths":{"/api/v1/actors/connect":{"post":{"tags":["api::v1::actor"],"operationId":"actor_connect","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActorConnectRequest"}}},"required":true},"responses":{"200":{"description":"Actor successfully connected to the Oauth Provider","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActorConnectResponse"}}}},"404":{"description":"Actor not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/auth/login_info":{"get":{"tags":["api::v1::auth"],"operationId":"login_info","responses":{"200":{"description":"Successfully got the Publishers","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthConfig"}}}},"404":{"description":"No such domain on this forge","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/components/":{"post":{"tags":["api::v1::component"],"operationId":"create_component","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComponentInput"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved component info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Component"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Component not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/components/get":{"post":{"tags":["api::v1::component"],"operationId":"get_component","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetComponentRequest"}}},"required":true},"responses":{"200":{"description":"Successfully got the Component","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Component"}}}},"404":{"description":"Component not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/components/import":{"post":{"tags":["api::v1::component"],"operationId":"import_component","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComponentInput"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved component info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Component"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Component not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/components/list":{"post":{"tags":["api::v1::component"],"operationId":"list_components","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListComponentRequest"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved component info","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Component"}}}}},"404":{"description":"Component not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/gates/":{"post":{"tags":["api::v1::gate"],"operationId":"create_gate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGateInput"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved gate info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Gate"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Gate not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/gates/get":{"post":{"tags":["api::v1::gate"],"operationId":"get_gate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GateSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved gate info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Gate"}}}},"404":{"description":"Gate not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/gates/list":{"post":{"tags":["api::v1::gate"],"operationId":"list_gates","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GateListRequest"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved gate info","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Gate"}}}}},"404":{"description":"Gate not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/gates/{id}":{"put":{"tags":["api::v1::gate"],"operationId":"update_gate","parameters":[{"name":"id","in":"path","description":"Database id of the Gate to update","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateGateInput"}}},"required":true},"responses":{"200":{"description":"Successfully retrieved gate info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Gate"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Gate not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}},"/api/v1/publishers/":{"get":{"tags":["api::v1::publisher"],"operationId":"list_publishers","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginationInput"}],"nullable":true}}},"required":false},"responses":{"200":{"description":"Successfully got the Publishers","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Publisher"}}}}}}},"post":{"tags":["api::v1::publisher"],"operationId":"create_publisher","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePublisherInput"}}},"required":true},"responses":{"200":{"description":"Successfully got the Publisher","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Publisher"}}}},"401":{"description":"Unauthorized to access the API","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":"Unauthorized"}}},"404":{"description":"Publisher not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"NotFound":"id = 1"}}}}}}}},"components":{"schemas":{"ActorConnectRequest":{"oneOf":[{"type":"object","required":["GitHub"],"properties":{"GitHub":{"type":"object","required":["handle","token","ssh_keys"],"properties":{"display_name":{"type":"string","nullable":true},"handle":{"type":"string"},"ssh_keys":{"type":"array","items":{"type":"string"}},"token":{"type":"string"}}}}},{"type":"object","required":["GitLab"],"properties":{"GitLab":{"type":"object","required":["handle","token","ssh_keys"],"properties":{"display_name":{"type":"string","nullable":true},"handle":{"type":"string"},"ssh_keys":{"type":"array","items":{"type":"string"}},"token":{"type":"string"}}}}}]},"ActorConnectResponse":{"type":"object","required":["access_token","refresh_token","ssh_keys","handle"],"properties":{"access_token":{"type":"string"},"handle":{"type":"string"},"refresh_token":{"type":"string"},"ssh_keys":{"type":"array","items":{"$ref":"#/components/schemas/ActorSSHKeyFingerprint"}}}},"ActorSSHKeyFingerprint":{"oneOf":[{"type":"object","required":["Ed25519"],"properties":{"Ed25519":{"type":"string"}}},{"type":"object","required":["Rsa"],"properties":{"Rsa":{"type":"string"}}},{"type":"object","required":["ECDSA"],"properties":{"ECDSA":{"type":"string"}}}]},"ApiError":{"oneOf":[{"type":"object","required":["BadRequest"],"properties":{"BadRequest":{"type":"string"}}},{"type":"string","enum":["Unauthorized"]},{"type":"object","required":["NotFound"],"properties":{"NotFound":{"type":"string"}}},{"type":"object","required":["ServerError"],"properties":{"ServerError":{"type":"string"}}}]},"ArchiveSource":{"type":"object","required":["src"],"properties":{"sha256":{"type":"string","nullable":true},"sha512":{"type":"string","nullable":true},"signature_url":{"type":"string","nullable":true},"signature_url_extension":{"type":"string","nullable":true},"src":{"type":"string"}}},"AuthConfig":{"type":"object","properties":{"github":{"allOf":[{"$ref":"#/components/schemas/OpenIdConfig"}],"nullable":true},"gitlab":{"allOf":[{"$ref":"#/components/schemas/OpenIdConfig"}],"nullable":true}}},"BuildFlagNode":{"type":"object","required":["flag"],"properties":{"flag":{"type":"string"},"flag_name":{"type":"string","nullable":true}}},"BuildOptionNode":{"type":"object","required":["option"],"properties":{"option":{"type":"string"}}},"BuildSection":{"type":"object","properties":{"cmake":{"type":"string","nullable":true},"configure":{"allOf":[{"$ref":"#/components/schemas/ConfigureBuildSection"}],"nullable":true},"meson":{"type":"string","nullable":true},"script":{"allOf":[{"$ref":"#/components/schemas/ScriptBuildSection"}],"nullable":true},"source":{"type":"string","nullable":true}}},"Component":{"type":"object","required":["name","version","revision","project_url","gate_id","recipe","packages"],"properties":{"anitya_id":{"type":"string","nullable":true},"gate_id":{"type":"string"},"name":{"type":"string"},"packages":{"$ref":"#/components/schemas/PackageMeta"},"project_url":{"type":"string"},"recipe":{"$ref":"#/components/schemas/Recipe"},"repology_id":{"type":"string","nullable":true},"revision":{"type":"string"},"version":{"type":"string"}}},"ComponentIdentifier":{"type":"object","required":["name","version","revision","gate_id"],"properties":{"gate_id":{"type":"string"},"name":{"type":"string"},"revision":{"type":"string"},"version":{"type":"string"}}},"ComponentInput":{"type":"object","required":["recipe","packages","gate"],"properties":{"anitya_id":{"type":"string","nullable":true},"gate":{"type":"string"},"packages":{"$ref":"#/components/schemas/PackageMeta"},"recipe":{"$ref":"#/components/schemas/Recipe"},"repology_id":{"type":"string","nullable":true}}},"ComponentMetadata":{"type":"array","items":{"$ref":"#/components/schemas/ComponentMetadataItem"}},"ComponentMetadataItem":{"type":"object","required":["name","value"],"properties":{"name":{"type":"string"},"value":{"type":"string"}}},"ConfigureBuildSection":{"type":"object","required":["options","flags"],"properties":{"compiler":{"type":"string","nullable":true},"flags":{"type":"array","items":{"$ref":"#/components/schemas/BuildFlagNode"}},"linker":{"type":"string","nullable":true},"options":{"type":"array","items":{"$ref":"#/components/schemas/BuildOptionNode"}}}},"CreateGateInput":{"type":"object","required":["name","publisher","version","branch"],"properties":{"branch":{"type":"string"},"name":{"type":"string"},"publisher":{"type":"string"},"transforms":{"type":"array","items":{"type":"string"},"nullable":true},"version":{"type":"string"}}},"CreatePublisherInput":{"type":"object","required":["name"],"properties":{"name":{"type":"string"}}},"Dependency":{"type":"object","required":["name","dev","kind"],"properties":{"dev":{"type":"boolean"},"kind":{"$ref":"#/components/schemas/DependencyKind"},"name":{"type":"string"}}},"DependencyKind":{"type":"string","enum":["Require","Incorporate","Optional"]},"DirectorySource":{"type":"object","required":["bundle_path"],"properties":{"bundle_path":{"type":"string"},"target_path":{"type":"string","nullable":true}}},"FileNode":{"type":"object","required":["include"],"properties":{"include":{"type":"string"}}},"FileSource":{"type":"object","required":["bundle_path"],"properties":{"bundle_path":{"type":"string"},"target_path":{"type":"string","nullable":true}}},"Gate":{"type":"object","required":["id","name","version","branch","publisher","transforms"],"properties":{"branch":{"type":"string"},"id":{"type":"string"},"name":{"type":"string"},"publisher":{"type":"string"},"transforms":{"type":"array","items":{"type":"string"}},"version":{"type":"string"}}},"GateListRequest":{"type":"object","properties":{"publisher":{"type":"string","nullable":true}}},"GateSearchRequest":{"type":"object","required":["publisher","name"],"properties":{"name":{"type":"string"},"publisher":{"type":"string"}}},"GetComponentRequest":{"type":"object","required":["name","version","revision","gate_id"],"properties":{"gate_id":{"type":"string"},"name":{"type":"string"},"revision":{"type":"string"},"version":{"type":"string"}}},"GitSource":{"type":"object","required":["repository"],"properties":{"archive":{"type":"boolean","nullable":true},"branch":{"type":"string","nullable":true},"directory":{"type":"string","nullable":true},"must_stay_as_repo":{"type":"boolean","nullable":true},"repository":{"type":"string"},"tag":{"type":"string","nullable":true}}},"InstallDirectiveNode":{"type":"object","required":["src","target","name"],"properties":{"fmatch":{"type":"string","nullable":true},"name":{"type":"string"},"pattern":{"type":"string","nullable":true},"src":{"type":"string"},"target":{"type":"string"}}},"ListComponentRequest":{"type":"object","required":["name"],"properties":{"gate_id":{"type":"string","nullable":true},"name":{"type":"string"},"revision":{"type":"string","nullable":true},"version":{"type":"string","nullable":true}}},"OpenIdConfig":{"type":"object","required":["client_id"],"properties":{"client_id":{"type":"string"}}},"OverlaySource":{"type":"object","required":["bundle_path"],"properties":{"bundle_path":{"type":"string"}}},"PackageMeta":{"type":"object","required":["name","fmris","dependencies"],"properties":{"dependencies":{"type":"array","items":{"type":"string"}},"fmris":{"type":"array","items":{"type":"string"}},"name":{"type":"string"}}},"PaginationInput":{"type":"object","required":["limit"],"properties":{"cursor":{"type":"string","nullable":true},"limit":{"type":"integer","format":"int64"}}},"PatchSource":{"type":"object","required":["bundle_path"],"properties":{"bundle_path":{"type":"string"},"drop_directories":{"type":"integer","format":"int64","nullable":true}}},"Publisher":{"type":"object","required":["id","name"],"properties":{"id":{"type":"string"},"name":{"type":"string"}}},"Recipe":{"type":"object","required":["name","maintainers","seperate_build_dir","sources","dependencies","build_sections"],"properties":{"build_sections":{"type":"array","items":{"$ref":"#/components/schemas/BuildSection"}},"classification":{"type":"string","nullable":true},"dependencies":{"type":"array","items":{"$ref":"#/components/schemas/Dependency"}},"license":{"type":"string","nullable":true},"license_file":{"type":"string","nullable":true},"maintainers":{"type":"array","items":{"type":"string"}},"metadata":{"allOf":[{"$ref":"#/components/schemas/ComponentMetadata"}],"nullable":true},"name":{"type":"string"},"prefix":{"type":"string","nullable":true},"project_name":{"type":"string","nullable":true},"project_url":{"type":"string","nullable":true},"revision":{"type":"string","nullable":true},"seperate_build_dir":{"type":"boolean"},"sources":{"type":"array","items":{"$ref":"#/components/schemas/SourceSection"}},"summary":{"type":"string","nullable":true},"version":{"type":"string","nullable":true}}},"ScriptBuildSection":{"type":"object","required":["scripts","install_directives"],"properties":{"install_directives":{"type":"array","items":{"$ref":"#/components/schemas/InstallDirectiveNode"}},"scripts":{"type":"array","items":{"$ref":"#/components/schemas/ScriptNode"}}}},"ScriptNode":{"type":"object","required":["name","prototype_dir"],"properties":{"name":{"type":"string"},"prototype_dir":{"type":"string"}}},"SourceNode":{"oneOf":[{"type":"object","required":["Archive"],"properties":{"Archive":{"$ref":"#/components/schemas/ArchiveSource"}}},{"type":"object","required":["Git"],"properties":{"Git":{"$ref":"#/components/schemas/GitSource"}}},{"type":"object","required":["File"],"properties":{"File":{"$ref":"#/components/schemas/FileSource"}}},{"type":"object","required":["Directory"],"properties":{"Directory":{"$ref":"#/components/schemas/DirectorySource"}}},{"type":"object","required":["Patch"],"properties":{"Patch":{"$ref":"#/components/schemas/PatchSource"}}},{"type":"object","required":["Overlay"],"properties":{"Overlay":{"$ref":"#/components/schemas/OverlaySource"}}}]},"SourceSection":{"type":"object","required":["sources"],"properties":{"sources":{"type":"array","items":{"$ref":"#/components/schemas/SourceNode"}}}},"UpdateGateInput":{"type":"object","properties":{"branch":{"type":"string","nullable":true},"name":{"type":"string","nullable":true},"transforms":{"type":"array","items":{"type":"string"},"nullable":true},"version":{"type":"string","nullable":true}}}},"securitySchemes":{"api_key":{"type":"apiKey","in":"header","name":"apikey"}}},"tags":[{"name":"forge","description":"Forge your packages"}]}